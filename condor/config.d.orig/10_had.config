#
# Base configuration values needed for an HAD setup
#

# HAD connection time.
# Recommended value is 2 if the central managers are on the same subnet.
# Recommended value is 5 if HTCondor security is enabled.
# Recommended value is 10 if the network is very slow, or
# to reduce the sensitivity of HA daemons to network failures.
HAD_CONNECTION_TIMEOUT = 2

# If true, the first central manager in HAD_LIST is a primary.
HAD_USE_PRIMARY = true

# The location of executable files
# The variables do not have any default values
# so they need to be defined
HAD         = $(SBIN)/condor_had
REPLICATION = $(SBIN)/condor_replication
# Correcting the path for transferer daemon
# # (Farukh 2017-09-13)
# # https://cms-logbook.cern.ch/elog/GlideInWMS/5609
TRANSFERER  = /usr/libexec/condor/condor_transferer

# DC_Daemon list should contain at least these five
DC_DAEMON_LIST = +HAD, REPLICATION

# Enables/disables the replication feature of HAD daemon
# Default: no
# Replication daemon duplicates state information file
# among all central managers
HAD_USE_REPLICATION = true

# Name of the file from the SPOOL directory that will be replicated
# Default: $(SPOOL)/Accountantnew.log
STATE_FILE = $(SPOOL)/Accountantnew.log

# Period of time between two successive awakenings of the replication daemon
# Default: 300
REPLICATION_INTERVAL = 300

# Period of time, in which transferer daemons have to accomplish the
## downloading/uploading process
## Default: 300
MAX_TRANSFERER_LIFETIME = 300

# Period of time between two successive sends of ClassAds to the collector by HAD
# Default: 300
HAD_UPDATE_INTERVAL = 300

# The HAD controls the negotiator, and should have a larger
# backoff constant
MASTER_NEGOTIATOR_CONTROLLER    = HAD
MASTER_HAD_BACKOFF_CONSTANT     = 360

# LOG FILES for HAD, REPLICATION and TRANSFERER daemon
# The size of the log file
MAX_HAD_LOG = 640000
# debug level
HAD_DEBUG = D_COMMAND
# location of the condor_had log file
HAD_LOG = $(LOG)/HADLog

# The size of replication log file
MAX_REPLICATION_LOG = 640000
# Replication debug level
REPLICATION_DEBUG = D_COMMAND
# Replication log file
REPLICATION_LOG = $(LOG)/ReplicationLog

# The size of transferer log file
MAX_TRANSFERER_LOG = 640000
# Replication debug level
TRANSFERER_DEBUG = D_COMMAND
# Replication log file
TRANSFERER_LOG = $(LOG)/TransferLog

# Specify HAD port
HAD_PORT = 51450
HAD_ARGS = -p $(HAD_PORT)

# The following list must contain the same addresses in the same order
# as COLLECTOR_HOST. In addition, for each hostname, it should specify
# the port number of condor_had daemon running on that host.
# The first machine in the list will be the PRIMARY central manager
# machine, in case HAD_USE_PRIMARY is set to true.
HAD_LIST = $(CONDOR_HOST1):$(HAD_PORT), $(CONDOR_HOST2):$(HAD_PORT)

# Specify replication port 
REPLICATION_PORT = 41450
REPLICATION_ARGS = -p $(REPLICATION_PORT)

# The following list must contain the same addresses
# as HAD_LIST. In addition, for each hostname, it should specify
# the port number of condor_replication daemon running on that host.
# This parameter is mandatory and has no default value
REPLICATION_LIST = $(CONDOR_HOST1):$(REPLICATION_PORT), $(CONDOR_HOST2):$(REPLICATION_PORT)

# Since we now have two collectors, forward just to the local one
CONDOR_VIEW_HOST = $(FULL_HOSTNAME)

# Now we actually start the daemons, too
DAEMON_LIST = $(DAEMON_LIST), HAD, REPLICATION
